---
import { Icon } from "astro-icon/components";
import Image from "astro/components/Image.astro";
import Logo from "../../public/logo-nobg.png";
import { navbar, redes } from "../repository/utilities";
---

<!-- <div id="overlay" class="fixed inset-0 bg-white/30 backdrop-blur-sm opacity-0 invisible transition-all duration-300 z-40"></div> -->
<div
  id="overlay"
  class="md:hidden fixed top-0 left-0 h-dvh w-64 inset-0 z-50 bg-slate-600/50 invisible opacity-0 transition-all duration-300"
>
</div>
<!-- <div id="overlay" class="fixed inset-0 bg-slate-900/50 opacity-0 invisible transition-all duration-300 z-40"></div> -->
<div
  id="menu"
  class="fixed top-0 left-0 h-dvh w-64 right-0 z-60 bg-cyan-700 flex flex-col justify-between transition-transform duration-300 translate-x-full"
>
  <div class="p-2 flex items-center">
    <!-- <div class="flex justify-center items-center">
            <Image src={Logo} alt="Logo de Licenciada Mariana Jimenez" class="rounded-full w-10 h-10">
        </div> -->
    <button
      id="btnClose"
      class="text-2xl self-end font-bold font-mono text-red-700"
    >
      <Icon name="mdi:close" class="w-10 h-10 text-slate-100 cursor" />
    </button>
  </div>

  <div class="flex flex-col gap-6">
    <nav class="flex justify-center items-center p-4 text-2xl font-semibold">
      <ul class="flex flex-col gap-5 items-center">
        {
          navbar.map((opc) => (
            <li class="text-amber-50">
              <a href={opc.href}>{opc.label}</a>
            </li>
          ))
        }
      </ul>
    </nav>

    <!-- <div class="flex justify-center">
            <a class="bg-[#a2e6df] py-3 px-3 rounded-full text-sm text-shadow-black" href="https://wa.me/+522222758027">Agenda una consulta</a>
        </div> -->
  </div>

  <div class="py-12">
    <ul class="flex gap-8 justify-center">
      {
        redes.map((r) => (
          <li>
            <a href={r.href} target="_blank">
              <Icon name={r.name} class="w-8 h-8 text-slate-100 cursor" />
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</div>

<script>
  const menu = document.querySelector("#menu");
  const overlay = document.querySelector("#overlay");
  const btnClose = document.querySelector("#btnClose");

  function toggleMenu(menu: Element, overlay: Element, btn: Element) {
    // Escuchamos el evento que mandÃ³ el padre
    window.addEventListener("toggle-menu", () => {
      menu.classList.toggle("translate-x-full");
      overlay.classList.toggle("invisible");
      overlay.classList.toggle("opacity-100");
    });

    btn.addEventListener("click", () => {
      menu.classList.toggle("translate-x-full");
      overlay?.classList.toggle("opacity-100");
      overlay?.classList.toggle("invisible");
    });

    overlay.addEventListener("click", () => {
      menu.classList.toggle("translate-x-full");
      overlay?.classList.toggle("opacity-100");
      overlay?.classList.toggle("invisible");
    });
  }

  if (menu && overlay && btnClose) {
    toggleMenu(menu, overlay, btnClose);
  }
</script>
